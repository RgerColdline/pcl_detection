# 控制日志是否输出各部分处理时间（目前无效）
timing:
  enable: true
  downsample: true
  walls: true
  cylinders: true
  circles: true
  total: true

# ROS 节点配置
ros_config:
  # 日志输出频率控制（两种方式选一）：
  # 方式 1：基于帧数 - 每 N 帧输出一次日志（0=每次都输出，19=每 20 帧输出 1 次）
  log_skip_frames: 19
  # 方式 2：基于时间 - 每 N 秒输出一次（0=禁用，2.0=每 2 秒输出一次）
  log_interval_sec: 2.0
  
  # Livox 点云转换日志级别：0=无输出，1=只输出摘要（input/output），2=输出前 5 个点详情
  livox_debug_level: 2

# 下采样配置
downsample_config:
  downsample_method: "standard"  #"standard"或"approx"(更快精度略低)
  leaf_size: 0.05  #升高提速，降低提升精度

# 墙体检测配置
wall_extraction:
  enable: true  #是否启用检测墙体
  using_normal: false  #是否使用法线信息(不建议)
  distance_threshold: 0.08  #距离阈值（目前我也不知道有啥用）
  min_inliers: 500  #点数阈值，低于这个点数的平面不算在内
  angle_threshold: 15.0 #角度阈值，单位度，平面法线与垂直方向的夹角必须小于这个值才算墙体
  axis: [0, 0, 1]  #参考的与墙面平行的向量

# 圆柱检测配置
cylinder_extraction:
  enable: true  #是否启用检测圆柱
  using_normal: false  #是否使用法线信息（不建议）
  distance_threshold: 0.06  #距离阈值，点到圆柱模型的最大允许距离
  min_inliers: 100  #点数阈值，圆柱内点数量必须大于此值
  radius_min: 0.1  #最小半径（米），小于此半径的圆柱不会被检测
  radius_max: 0.4  #最大半径（米），大于此半径的圆柱不会被检测
  axis: [0, 0, 1]  #圆柱轴向参考向量，用于约束圆柱方向
  eps_angle: 25.0  #角度容差（度），圆柱轴向与参考轴的最大允许夹角

# 圆环检测配置
circle_extraction:
  enable: true  #是否启用检测圆环
  using_normal: false  #是否使用法线信息（不建议）
  distance_threshold: 0.03  #距离阈值，点到圆环模型的最大允许距离
  min_inliers: 80  #点数阈值，圆环内点数量必须大于此值
  radius_min: 0.2  #最小半径（米），小于此半径的圆环不会被检测
  radius_max: 0.7  #最大半径（米），大于此半径的圆环不会被检测
  plane_distance_threshold: 0.06  #平面提取距离阈值，用于提取圆环所在平面
  plane_angle_threshold: 45.0  #平面角度阈值（度），平面法线与垂直方向的最大夹角
  plane_normal_z_max: 0.7  #平面法向量 Z 分量最大值，用于筛选竖直平面
  min_coverage_angle: 240.0  #最小覆盖角度（度），圆环必须覆盖至少这么多角度
  ransac_iterations: 200  #RANSAC 迭代次数，越高越准确但越慢
  max_circles: 5  #最大检测圆环数量
  normal_tolerance: 0.5  #法向量容差，用于验证圆环法向量方向

save_objects: false #是否保存检测到的对象点云
output_dir: "/home/jetson/detected_objects"

# ============================================================================
# 点云采样配置（points_samples 节点）
# ============================================================================
# 用法：
#   1. 在 launch 文件中设置参数：
#      <param name="enable_livox_callback" value="true" />
#
#   2. 或命令行启动时设置：
#      roslaunch pcl_detection points_sample.launch enable_livox_callback:=true
#
#   3. 触发保存点云：
#      rosparam set /livox/save_sample true
# ============================================================================
points_sample_config:
  enable_livox_callback: true # 是否启用 Livox 点云回调
  save_sample_param: "/livox/save_sample" # 触发保存的 ROS 参数名称
